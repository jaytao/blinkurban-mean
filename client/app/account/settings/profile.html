<form class="form" name="form" ng-submit="updateProfile(form)" novalidate>
  <h3>MY PROFILE</h3>
  <hr>
  <div class="row">

    <div class="col-sm-6">
      <div class="form-group" ng-class="{ 'has-success': form.firstname.$valid && submitted, 'has-error': form.firstname.$invalid && submitted }">
        <label>First Name *</label>
        <input type="text" name="firstname" class="form-control" ng-model="user.firstname" required  mongoose-error/>
        <p class="help-block" ng-show="form.firstname.$error.required && submitted">
          A first name is required
        </p>
        <p class="help-block" ng-show="form.firstname.$error.mongoose">
          {{ errors.firstname }}
        </p>
      </div>
    </div>

    <div class="col-sm-6">
      <div class="form-group" ng-class="{ 'has-success': form.lastname.$valid && submitted, 'has-error': form.lastname.$invalid && submitted }">
        <label>Last Name *</label>
        <input type="text" name="lastname" class="form-control" ng-model="user.lastname" required mongoose-error/>
        <p class="help-block" ng-show="form.lastname.$error.required && submitted">
          A last name is required
        </p>
        <p class="help-block" ng-show="form.firstname.$error.mongoose">
          {{ errors.lastname }}
        </p>
      </div>
    </div>

  </div>

  <div class="form-group" ng-class="{ 'has-success': form.email.$valid && submitted, 'has-error': form.email.$invalid && submitted }">
    <label>Email *</label>
    <input type="email" name="email" class="form-control" ng-model="user.email" required mongoose-error/>
    <p class="help-block" ng-show="form.email.$error.email && submitted">
      Doesn't look like a valid email.
    </p>
    <p class="help-block" ng-show="form.email.$error.required && submitted">
      An email address is required.
    </p>
    <p class="help-block" ng-show="form.email.$error.mongoose">
      {{ errors.email }}
    </p>
  </div>

  <p class="help-block"> {{ message }} </p>

  <button class="btn btn-primary" type="submit">Save changes</button>
</form>